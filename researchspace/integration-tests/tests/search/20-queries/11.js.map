{"version":3,"file":"11.js","sourceRoot":"","sources":["11.ts"],"names":[],"mappings":";;;AAqBA,kCAAqC;AACrC,qCAAsC;AAQtC,iBAA8B,MAAiB,EAAE,IAAU,EAAE,OAAgB;;QAC3E,MAAM,IAAI,CAAC,IAAI,CACb,2HAA2H,EAC3H,CAAO,CAAO;YAAK,MAAM,CAAN,MAAM,iBAAU,CAAC,MAAM,EAAE,CAAC,EAAE,OAAO,EAAE,CAAO,CAAC,EAAE,CAAC;gBACjE,MAAM,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;gBAC3B,MAAM,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBAC5B,MAAM,CAAC,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC;gBACzC,MAAM,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;gBAC3B,MAAM,CAAC,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;gBACjC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;gBAE1B,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,aAAa,EAAE,CAAC;gBACnC,MAAM,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBACzB,MAAM,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACzB,MAAM,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;gBAClC,MAAM,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;gBACnC,MAAM,CAAC,CAAC,YAAY,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAEzC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,aAAa,EAAE,CAAC;gBACnC,MAAM,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBACzB,MAAM,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;gBAC1B,MAAM,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;gBAClC,MAAM,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC5B,MAAM,CAAC,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;gBAClC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;gBAE1B,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,aAAa,EAAE,CAAC;gBACnC,MAAM,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBACzB,MAAM,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBAC5B,MAAM,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;gBAChC,MAAM,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;gBAC1B,MAAM,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;gBAChC,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;gBAE1B,MAAM,cAAc,GAAG,IAAI,CAAC;gBAC5B,MAAM,YAAY,GAAG,MAAM,CAAC,CAAC,aAAa,EAAE,CAAC;gBAC7C,MAAM,CAAC,CAAC,KAAK,CAAC,cAAc,EAAE,YAAY,EAAE,wCAAwC,CAAC,CAAC;gBAEtF,MAAM,CAAC,CAAC,SAAS,EAAE,CAAC;gBACpB,MAAM,GAAG,GAAG,MAAM,CAAC,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,CAAC;gBAC9D,MAAM,CAAC,CAAC,kBAAkB,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;gBAEjD,MAAM,OAAO,GAAG,MAAM,CAAC,CAAC,gBAAgB,EAAE,CAAC;gBAC3C,MAAM,eAAQ,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;YACrD,CAAC,CAAA,CAAC,CAAA;UAAA,CAAC,CAAC;IACR,CAAC;CAAA;AA7CD,0BA6CC","sourcesContent":["/*\n * Copyright (C) 2015-2017, Â© Trustees of the British Museum\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2.1 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, you can receive a copy\n * of the GNU Lesser General Public License from http://www.gnu.org/\n */\n\nimport { WebDriver } from 'selenium-webdriver';\nimport { Test } from 'tap';\nimport { Options } from '../../options';\nimport { testSearch } from '../util';\nimport { sameSets } from '../../util';\n\n/**\n * replace text search \"coin\" to \"has type coin\", because full text search doesn't make much sense\n * for such generic term which has millions of matches, and we return only few thousands from solr\n *\n * @author Artem Kozlov <ak@metaphacts.com>\n */\nexport async function test_11(driver: WebDriver, test: Test, options: Options) {\n  await test.test(\n    '11) Find: Things has material type metal and created on Year 100 BC - Year 500 AD and created at Greece and has type coin',\n    async (t: Test) => await testSearch(driver, t, options, async (s, d) => {\n      await s.setDomain('Thing');\n      await s.setRange('Concept');\n      await s.setRelation('has material type');\n      await s.typeRange('metal');\n      await s.toggleRangeNode('metal');\n      await s.submitRangeTree();\n\n      const c1 = await s.getLastClause();\n      await s.addAndClause(c1);\n      await s.setRange('Time');\n      await s.setRelation('created on');\n      await s.setDateFormat('YearRange');\n      await s.setYearRange('100/BC', '500/AD');\n\n      const c2 = await s.getLastClause();\n      await s.addAndClause(c2);\n      await s.setRange('Place');\n      await s.setRelation('created at');\n      await s.typeRange('greece');\n      await s.toggleRangeNode('Greece');\n      await s.submitRangeTree();\n\n      const c3 = await s.getLastClause();\n      await s.addAndClause(c3);\n      await s.setRange('Concept');\n      await s.setRelation('has type');\n      await s.typeRange('coin');\n      await s.toggleRangeNode('coin');\n      await s.submitRangeTree();\n\n      const expectedResult = 4478;\n      const resultNumber = await s.getNumResults();\n      await t.equal(expectedResult, resultNumber, 'correct number of intermediate results');\n\n      await s.showFacet();\n      const rel = await s.openFacetRelation('found or acquired at');\n      await s.clickFacetCheckbox(rel, 'British Isles');\n\n      const results = await s.getSearchResults();\n      await sameSets(t, results, await d.readData('11'));\n    }));\n}\n"]}