{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;AAsBA,yBAAyB;AAIzB,OAAO,CAAC,gCAAgC,CAAC,CAAC,mBAAmB,GAAG,KAAK,CAAC;AAEtE,gDAA6C;AAC7C,2CAA0C;AAC1C,uCAAyC;AAEzC,CAAC;;QACC,MAAM,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC;QACvE,MAAM,EAAC,OAAO,EAAE,OAAO,EAAC,GAAG,qBAAU,CAAC,OAAO,CAAC,CAAC;QAE/C,GAAG,CAAC,CAAC,IAAI,EAAC,IAAI,EAAE,YAAY,EAAC,IAAI,OAAO,CAAC,CAAC,CAAC;YACzC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAO,CAAC;gBACzB,MAAM,MAAM,GAAG,YAAY,EAAE,CAAC;gBAC9B,MAAM,MAAM,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC;gBAE1C,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;oBACrB,MAAM,gBAAS,CAAC,MAAM,EAAE,CAAC,EAAE,OAAO,CAAC,QAAQ,IAAI,EAAE,EAAE,OAAO,CAAC,QAAQ,IAAI,EAAE,EAAE,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC;gBACrG,CAAC;gBAED,MAAM,mBAAU,CAAC,MAAM,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;gBACrC,MAAM,MAAM,CAAC,IAAI,EAAE,CAAC;YACtB,CAAC,CAAA,CAAC,CAAC;QACL,CAAC;IACH,CAAC;CAAA,CAAC,EAAE,CAAC","sourcesContent":["/*\n * Copyright (C) 2015-2017, Â© Trustees of the British Museum\n *\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2.1 of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public\n * License along with this library; if not, you can receive a copy\n * of the GNU Lesser General Public License from http://www.gnu.org/\n */\n\n/**\n * @author Philip Polkovnikov\n */\n\nimport * as t from 'tap';\n\n// this line disables promise manager (https://github.com/SeleniumHQ/selenium/wiki/WebDriverJs)\n// it has to be require(...) to work (https://github.com/Microsoft/TypeScript/issues/6751)\nrequire('selenium-webdriver/lib/promise').USE_PROMISE_MANAGER = false;\n\nimport {getTargets} from './config/machines';\nimport {searchTest} from './tests/search';\nimport { authorize } from './tests/util';\n\n(async function () {\n  const machine = process.argv.length >= 3 && process.argv[2] || 'local';\n  const {targets, options} = getTargets(machine);\n\n  for (let {name, createDriver} of targets) {\n    await t.test(name, async (t) => {\n      const driver = createDriver();\n      await driver.manage().window().maximize();\n\n      if (!options.noLogin) {\n        await authorize(driver, t, options.loginUrl || \"\", options.username || \"\", options.password || \"\");\n      }\n\n      await searchTest(driver, t, options);\n      await driver.quit();\n    });\n  }\n})();\n"]}